Building a new linkedin tool inspired by the get_research tool

take a brief
stage 1: find the canonical person or company mentioned in the brief
- do a web search limited to site:linkedin.com
- get search results and rerank them based on known context about the user
- determine the canonical result
- if cannot determine with high degree of confidence, tool returnes with error requesting more info

stage 2:

if person
- get person's complete profile and save raw profile to person table in db - unique id is linkedin handle/id
- create normalised person profile summary by passing into a llm call with target json schema and save the result to db
- get person's posts and save raw json to db
- create normalised post summary by passing into llm call with target json and save response to db

if company
- get company's complete profile and save to company table in db - unique id is company handle/id
- create normalised company profile summary by passing into a llm call with target json schema and save the result to db
- get company's posts and save raw json to db
- create normalised post summary by passing into llm call with target json and save response to db

stage 3:
respond with summary (summary is generated by passing the given person's/company's profile summary and post summary from db to an llm call which gets streamed back to ui



-------------

Linkedin Api details

==============

Search for person API endpoints
---
import requests

url = "https://linkedin-data-api.p.rapidapi.com/"

querystring = {"username":"adamselipsky"}

headers = {
	"x-rapidapi-key": "31v03sc0Slmsh9KLq2DBo9Hr1oShp1QeZiwjsnEHjnihFNItGi",
	"x-rapidapi-host": "linkedin-data-api.p.rapidapi.com"
}

response = requests.get(url, headers=headers, params=querystring)

print(response.json())

---

Response format (truncated)

{
    "urn": "ACoAABu9To8BP8xR5-LAKUd_6hruTJpggQIXW48",
    "username": "username",
    "firstName": "Yogesh",
    "lastName": "Kumar",
    "isCreator": true,
    "isOpenToWork": false,
    "isHiring": false,
    "profilePicture": "https://media.licdn.com/dms/image/D5603AQHHeiC4RfsaYA/profile-displayphoto-shrink_800_800/0/1668512713493?e=1724284800&v=beta&t=1yNjF6GZz3o53WKhQT473OX-ksct68wC4P4njltDKdI",
    "backgroundImage": [
      {
        "width": 800,
        "height": 200,
        "url": "https://media.licdn.com/dms/image/C5616AQGbyoDn3-grBw/profile-displaybackgroundimage-shrink_200_800/0/1517498260023?e=1724284800&v=beta&t=MSeF_GXuBKbzd-FCFHexA15AsHfyucrSYZepriRav8w"
      },
      {
        "width": 1354,
        "height": 338,
        "url": "https://media.licdn.com/dms/image/C5616AQGbyoDn3-grBw/profile-displaybackgroundimage-shrink_350_1400/0/1517498260272?e=1724284800&v=beta&t=cIO5jZOPryphchdz-GK9QN_muVi85KT1qHzxJ94XI2I"
      }
    ],
    "summary": "Click the connect button and I'll jump on a quick call with you! Stay safe and have a great day.",
    "headline": "Certified Salesforce Expert |\nSr. React Native Developer",
    "geo": {
      "country": "India",
      "city": "New Delhi, Delhi",
      "full": "New Delhi, Delhi, India"
    },
    "languages": [
      {
        "name": "English",
        "proficiency": "NATIVE_OR_BILINGUAL"
      },
      {
        "name": "Hindi",
        "proficiency": "NATIVE_OR_BILINGUAL"
      }
    ],
    "educations": [
      {
        "start": {
          "year": 0,
          "month": 0,
          "day": 0
        },
        "end": {
          "year": 0,
          "month": 0,
          "day": 0
        },
        "fieldOfStudy": "Cloud Computing & Analytics",
        "degree": "Master of Science - MS",
        "grade": "3.58/4",
        "schoolName": "Illinois Institute of Technology",
        "description": "",
        "activities": "",
        "url": "https://www.linkedin.com/school/illinois-tech/",
        "schoolId": "6328"
      },
      {
        "start": {
          "year": 0,
          "month": 0,
          "day": 0
        },
        "end": {
          "year": 0,
          "month": 0,
          "day": 0
        },
        "fieldOfStudy": "Computer/Information Technology Administration and Management",
        "degree": "Bachelor of Business Administration - BBA",
        "grade": "A",
        "schoolName": "Institute of Management Studies, Noida",
        "description": "Accounting for Leaders, Managerial Finance, Marketing Strategies, Leadership & Change in Org, Operational Planning & Policy",
        "activities": "",
        "url": "https://www.linkedin.com/school/institute-of-management-studies-noida/",
        "schoolId": "3259388"
      }
    ],
    "position": [
      {
        "companyName": "Upwork",
        "companyUsername": "upwork",
        "companyURL": "https://www.linkedin.com/company/upwork/",
        "companyLogo": "https://media.licdn.com/dms/image/C4E0BAQFAvA55uI9RQQ/company-logo_400_400/0/1630655510176/upwork_logo?e=1727308800&v=beta&t=I9li7lTm-aYsmAt9AFBgRp160Oei0Bam1fEs7apg54Q",
        "companyIndustry": "Computer Software",
        "companyStaffCountRange": "501 - 1000",
        "title": "Certified Salesforce Admin, Developer & Marketing Operations Manager",
        "multiLocaleTitle": {
          "en_US": "Certified Salesforce Admin, Developer & Marketing Operations Manager"
        },
        "multiLocaleCompanyName": {
          "en_US": "Upwork"
        },
        "location": "United States",
        "description": "✅Certified Salesforce Developer\n✅Certified Salesforce Administrator\n✅Certified Salesforce Marketing Cloud Specialist",
        "employmentType": "Freelance",
        "start": {
          "year": 2022,
          "month": 7,
          "day": 0
        },
        "end": {
          "year": 0,
          "month": 0,
          "day": 0
        }
      },
      Etc


==============

Get person posts API Endpoint
---

import requests

url = "https://linkedin-data-api.p.rapidapi.com/get-profile-posts"

querystring = {"username":"adamselipsky","start":"0"}

headers = {
	"x-rapidapi-key": "31v03sc0Slmsh9KLq2DBo9Hr1oShp1QeZiwjsnEHjnihFNItGi",
	"x-rapidapi-host": "linkedin-data-api.p.rapidapi.com"
}

response = requests.get(url, headers=headers, params=querystring)

print(response.json())

---

{
  "success": true,
  "message": "",
  "data": [
    {
      "text": "Today marks a significant milestone for the telecom industry.\n\nTelefónica Germany announced it will build a new 5G Cloud Core on Amazon Web Services (AWS), done in collaboration with Nokia.",
      "totalReactionCount": 2907,
      "likeCount": 2534,
      "appreciationCount": 5,
      "empathyCount": 39,
      "InterestCount": 65,
      "praiseCount": 264,
      "commentsCount": 37,
      "repostsCount": 186,
      "postUrl": "https://www.linkedin.com/feed/update/urn:li:activity:7194079655832739842/",
      "postedAt": "19h",
      "postedDate": "2024-05-08 21:04:09.487 +0000 UTC",
      "postedDateTimestamp": 1715202249487,
      "urn": "7194079655832739842",
      "author": {
        "firstName": "Adam",
        "lastName": "Selipsky",
        "username": "adamselipsky",
        "url": "https://www.linkedin.com/in/adamselipsky"
      },
      "company": {},
      "article": {
        "title": "Exclusive: Amazon breaks into Europe 5G networks with Telefonica cloud deal",
        "subtitle": "reuters.com • 3 min read",
        "link": "https://www.reuters.com/business/media-telecom/amazon-breaks-into-europe-5g-networks-with-telefonica-cloud-deal-2024-05-08/"
      }
    } 
  ],
  "paginationToken": "dXJuOmxpOmFjdGl2aXR5OjcxNTc4MDc0MTgyNzIzNTAyMDgtMTcwNjU1NDI3NDEyOA=="
}

===================

Get company profile API endpoint

---

import requests

url = "https://linkedin-data-api.p.rapidapi.com/get-company-details"

querystring = {"username":"google"}

headers = {
	"x-rapidapi-key": "31v03sc0Slmsh9KLq2DBo9Hr1oShp1QeZiwjsnEHjnihFNItGi",
	"x-rapidapi-host": "linkedin-data-api.p.rapidapi.com"
}

response = requests.get(url, headers=headers, params=querystring)

print(response.json())

---

API response format

{
  "success": true,
  "message": "",
  "data": {
    "id": "1441",
    "name": "Google",
    "universalName": "google",
    "tagline": "",
    "description": "A problem isn't truly solved until it's solved for all. Googlers build products that help create opportunities for everyone, whether down the street or across the globe. Bring your insight, imagination and a healthy disregard for the impossible. Bring everything that makes you unique. Together, we can build for everyone.\n\nCheck out our career opportunities at goo.gle/3DLEokh",
    "type": "Public Company",
    "phone": "",
    "Images": {
      "logo": "https://media.licdn.com/dms/image/C4D0BAQHiNSL4Or29cg/company-logo_400_400/0/1631311446380?e=1721260800&v=beta&t=tK62cHy4uDkoLE6m3dOtWjFB4ZCsDM161WDyrsAIOsc",
      "cover": "https://media.licdn.com/dms/image/D563DAQGidE_JJMiShg/image-scale_127_750/0/1711380507670/google_cover?e=1713538800&v=beta&t=LaE29eqgfVcmbJ4ns6-1v-8TVTFCsU3EhlY4I7OOJSA"
    },
    "backgroundCoverImages": [
      {
        "url": "https://media.licdn.com/dms/image/D563DAQGidE_JJMiShg/image-scale_127_750/0/1711380507670/google_cover?e=1713538800&v=beta&t=LaE29eqgfVcmbJ4ns6-1v-8TVTFCsU3EhlY4I7OOJSA",
        "width": 750,
        "height": 126
      },
      {
        "url": "https://media.licdn.com/dms/image/D563DAQGidE_JJMiShg/image-scale_108_640/0/1711380507670/google_cover?e=1713538800&v=beta&t=bEV5y5uAhr4Es99P3EsVuAZ_ZfTR1O3Fu6miBt9wr7Y",
        "width": 108,
        "height": 18
      },
      {
        "url": "https://media.licdn.com/dms/image/D563DAQGidE_JJMiShg/image-scale_191_1128/0/1711380507670/google_cover?e=1713538800&v=beta&t=xuI_x1e73LqW55LJ37nhN6RmQfp2rKc6j36nyW7l2t0",
        "width": 1128,
        "height": 191
      }
    ],
    "logos": [
      {
        "url": "https://media.licdn.com/dms/image/C4D0BAQHiNSL4Or29cg/company-logo_200_200/0/1631311446380?e=1721260800&v=beta&t=Xe26JHaTX7mNlmVo2zbNXlmUBvJBoPsc2RMrE5kE9ig",
        "width": 200,
        "height": 200
      },
      {
        "url": "https://media.licdn.com/dms/image/C4D0BAQHiNSL4Or29cg/company-logo_100_100/0/1631311446380?e=1721260800&v=beta&t=Mv7k2pgG5BoNeNHIbODEOR_wmPk1ZthJMHvZ9DwnAlw",
        "width": 100,
        "height": 100
      },
      {
        "url": "https://media.licdn.com/dms/image/C4D0BAQHiNSL4Or29cg/company-logo_400_400/0/1631311446380?e=1721260800&v=beta&t=tK62cHy4uDkoLE6m3dOtWjFB4ZCsDM161WDyrsAIOsc",
        "width": 400,
        "height": 400
      }
    ],
    "staffCount": 282619,
    "headquarter": {
      "geographicArea": "CA",
      "country": "US",
      "city": "Mountain View",
      "postalCode": "94043",
      "line1": "1600 Amphitheatre Parkway"
    },
    "locations": [
      {
        "geographicArea": "CA",
        "country": "US",
        "city": "Mountain View",
        "postalCode": "94043",
        "headquarter": true,
        "line1": "1600 Amphitheatre Parkway"
      }
    ],
    "industries": [
      "Software Development"
    ],
    "specialities": [
      "search",
      "ads",
      "mobile"
    ],
    "website": "https://goo.gle/3DLEokh",
    "founded": null,
    "callToAction": {
      "callToActionType": "VIEW_WEBSITE",
      "visible": true,
      "callToActionMessage": {
        "textDirection": "USER_LOCALE",
        "text": "Visit website"
      },
      "url": "https://goo.gle/3DLEokh"
    },
    "followerCount": 32617131,
    "staffCountRange": "10001+",
    "crunchbaseUrl": "https://www.crunchbase.com/organization/public-app",
    "fundingData": {
      "updatedAt": "1708337265",
      "updatedDate": "2024-02-19 10:07:45 +0000 UTC",
      "numFundingRounds": 1,
      "lastFundingRound": {
        "investorsCrunchbaseUrl": "https://www.crunchbase.com/funding_round/public-app-series-unknown--a23e7042",
        "leadInvestors": [
          {
            "name": "A91 Partners",
            "investorCrunchbaseUrl": "https://www.crunchbase.com/organization/a91-partners"
          }
        ],
        "fundingRoundCrunchbaseUrl": "https://www.crunchbase.com/funding_round/public-app-series-unknown--a23e7042?utm_source=linkedin&utm_medium=referral&utm_campaign=linkedin_companies&utm_content=last_funding",
        "fundingType": "SERIES_UNKNOWN",
        "moneyRaised": {
          "currencyCode": "USD",
          "amount": "41300000"
        },
        "numOtherInvestors": 3,
        "announcedOn": {
          "month": 3,
          "day": 24,
          "year": 2021
        }
      }
    }
  }
}


===========

Get company posts API endpoint

---
import requests

url = "https://linkedin-data-api.p.rapidapi.com/get-company-posts"

querystring = {"username":"microsoft","start":"0"}

headers = {
	"x-rapidapi-key": "31v03sc0Slmsh9KLq2DBo9Hr1oShp1QeZiwjsnEHjnihFNItGi",
	"x-rapidapi-host": "linkedin-data-api.p.rapidapi.com"
}

response = requests.get(url, headers=headers, params=querystring)

print(response.json())

---

API endpoint response format

{
  "success": true,
  "message": "",
  "data": [
    {
      "text": "Microsoft Copilot, your everyday AI companion. Copilot is available to anyone, anywhere, on any device. Try now: https://msft.it/6005iAMlH",
      "totalReactionCount": 2302,
      "likeCount": 1743,
      "appreciationCount": 11,
      "empathyCount": 350,
      "InterestCount": 18,
      "praiseCount": 180,
      "commentsCount": 103,
      "repostsCount": 1235,
      "postUrl": "https://www.linkedin.com/feed/update/urn:li:activity:7161010911544041472/",
      "postedAt": "1w",
      "urn": "7161010911544041472",
      "author": {},
      "video": [
        {
          "url": "https://dms.licdn.com/playlist/vid/D5605AQGdF_x8nmf9uQ/mp4-720p-30fp-crf28/0/1707318038991?e=1708794000&v=beta&t=dro34XBwGCxwxTSvaONu5WejbRzfoolFrl1RU_Mllbs",
          "poster": "https://media.licdn.com/dms/image/D5605AQGdF_x8nmf9uQ/feedshare-thumbnail_720_1280/0/1707318008203?e=1708794000&v=beta&t=AHrKu3vMDZAbVfjImzBLMej_zloskkQcWr754rUCH_w",
          "duration": 60600
        }
      ],
      "company": {
        "name": "Microsoft",
        "url": "https://www.linkedin.com/company/microsoft/",
        "urn": "urn:li:fsd_company:1035"
      },
      "article": {}
    }
  ]
}

======

Duckdb

Db name: 'linkedin'
tables: person and company
schema: linkedin_id (str), profile_raw (json), profile_summary (json), posts_raw (json), posts_summary (json)
